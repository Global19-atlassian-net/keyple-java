<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="4446px" preserveAspectRatio="none" style="width:3514px;height:4446px;" version="1.1" viewBox="0 0 3514 4446" width="3514px" zoomAndPan="magnify"><defs><filter height="1" id="b12vmxatmsuxph0" width="1" x="0" y="0"><feFlood flood-color="#ADD8E6" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="36" lengthAdjust="spacingAndGlyphs" textLength="412" x="1542.5" y="57.3711">Keyple Plugin Remote SE</text><text fill="#000000" font-family="sans-serif" font-size="36" lengthAdjust="spacingAndGlyphs" textLength="652" x="1422.5" y="102.6523">RemoteSeServerPlugin API (16/06/2020)</text><text fill="#000000" font-family="sans-serif" font-size="36" lengthAdjust="spacingAndGlyphs" textLength="450" x="1523.5" y="147.9336">(with an ObservableReader)</text><rect fill="#FEF9E7" height="4253.9063" rx="10" ry="10" style="stroke: #A80036; stroke-width: 2.0;" width="1719" x="239" y="171.8438"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="1037.5" y="198.834">Native SE</text><rect fill="#FDF2E9" height="4253.9063" rx="10" ry="10" style="stroke: #A80036; stroke-width: 2.0;" width="1440" x="1962" y="171.8438"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="2619" y="198.834">Virtual SE</text><rect fill="#FFFFE0" height="2633.3438" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="68" y="1571.9688"/><rect fill="#ADD8E6" height="242.8125" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="384" y="1571.9688"/><rect fill="#ADD8E6" height="93.2188" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="661" y="1034.5313"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="661" y="1363.8594"/><rect fill="#FFC0CB" height="3468.1094" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1174" y="737.2031"/><rect fill="#ADD8E6" height="1886.2031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1768" y="2301.1094"/><rect fill="#ADD8E6" height="145.9219" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2138" y="2329.1094"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2138" y="2535.7344"/><rect fill="#ADD8E6" height="88.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2138" y="4037.9063"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="2657.1406"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="3073.3594"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="3227.4688"/><rect fill="#ADD8E6" height="28" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="3348.875"/><rect fill="#ADD8E6" height="182.1094" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="3694.3906"/><rect fill="#FFC0CB" height="3776.3281" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="3137" y="428.9844"/><rect fill="#FDF2E9" height="398.9219" rx="10" ry="10" style="stroke: #000000; stroke-width: 4.0;" width="3388" x="26" y="3493.5781"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="78" x2="78" y1="408.9844" y2="4223.3125"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="393" x2="393" y1="1093.1406" y2="4223.3125"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="670" x2="670" y1="1003.8281" y2="4223.3125"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1184" x2="1184" y1="408.9844" y2="4223.3125"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1778" x2="1778" y1="914.5156" y2="4223.3125"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="2148" x2="2148" y1="600.7422" y2="4223.3125"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="2612" x2="2612" y1="2407.7188" y2="4223.3125"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="3146" x2="3146" y1="408.9844" y2="4223.3125"/><rect fill="#FEFECE" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="64" x="46" y="343.7656"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="36" x="60" y="386.832">SE</text><rect fill="#FEFECE" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="64" x="46" y="4221.3125"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="36" x="60" y="4264.3789">SE</text><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="294" x="247" y="4221.3125"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="266" x="261" y="4264.3789">ObservableReader</text><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="218" x="562" y="4221.3125"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="576" y="4264.3789">ReaderPlugin</text><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="1080" y="402.832">Native SE App</text><ellipse cx="1184" cy="267.7656" fill="#FEFECE" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M1184,283.7656 L1184,337.7656 M1158,299.7656 L1210,299.7656 M1184,337.7656 L1158,367.7656 M1184,337.7656 L1210,367.7656 " fill="none" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="1080" y="4250.3789">Native SE App</text><ellipse cx="1184" cy="4276.5313" fill="#FEFECE" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M1184,4292.5313 L1184,4346.5313 M1158,4308.5313 L1210,4308.5313 M1184,4346.5313 L1158,4376.5313 M1184,4346.5313 L1210,4376.5313 " fill="none" style="stroke: #A80036; stroke-width: 4.0;"/><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="344" x="1606" y="4221.3125"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316" x="1620" y="4264.3789">NativeSeClientService</text><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="356" x="1970" y="4221.3125"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="328" x="1984" y="4264.3789">RemoteSeServerPlugin</text><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="534" x="2346" y="4221.3125"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="506" x="2360" y="4264.3789">RemoteSeServerObservableReader</text><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="3039" y="367.6133">Virtual SE App</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="8" x="3235" y="367.6133">:</text><text fill="#000000" filter="url(#b12vmxatmsuxph0)" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="482" x="2900" y="402.832">ObservablePlugin.PluginObserver</text><ellipse cx="3147" cy="232.5469" fill="#FEFECE" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M3147,248.5469 L3147,302.5469 M3121,264.5469 L3173,264.5469 M3147,302.5469 L3121,332.5469 M3147,302.5469 L3173,332.5469 " fill="none" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="3039" y="4250.3789">Virtual SE App</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="8" x="3235" y="4250.3789">:</text><text fill="#000000" filter="url(#b12vmxatmsuxph0)" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="482" x="2900" y="4285.5977">ObservablePlugin.PluginObserver</text><ellipse cx="3147" cy="4311.75" fill="#FEFECE" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M3147,4327.75 L3147,4381.75 M3121,4343.75 L3173,4343.75 M3147,4381.75 L3121,4411.75 M3147,4381.75 L3173,4411.75 " fill="none" style="stroke: #A80036; stroke-width: 4.0;"/><rect fill="#FFFFE0" height="2633.3438" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="68" y="1571.9688"/><rect fill="#ADD8E6" height="242.8125" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="384" y="1571.9688"/><rect fill="#ADD8E6" height="93.2188" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="661" y="1034.5313"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="661" y="1363.8594"/><rect fill="#FFC0CB" height="3468.1094" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1174" y="737.2031"/><rect fill="#ADD8E6" height="1886.2031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1768" y="2301.1094"/><rect fill="#ADD8E6" height="145.9219" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2138" y="2329.1094"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2138" y="2535.7344"/><rect fill="#ADD8E6" height="88.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2138" y="4037.9063"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="2657.1406"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="3073.3594"/><rect fill="#ADD8E6" height="60.7031" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="3227.4688"/><rect fill="#ADD8E6" height="28" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="3348.875"/><rect fill="#ADD8E6" height="182.1094" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="2603" y="3694.3906"/><rect fill="#FFC0CB" height="3776.3281" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="3137" y="428.9844"/><rect fill="#EEEEEE" height="6" style="stroke: #EEEEEE; stroke-width: 2.0;" width="3485" x="6" y="471.3359"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="471.3359" y2="471.3359"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="477.3359" y2="477.3359"/><rect fill="#EEEEEE" height="48.7031" style="stroke: #000000; stroke-width: 4.0;" width="328" x="1584.5" y="448.9844"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="292" x="1596.5" y="483.9746">Virtual SE Initialization</text><polygon fill="#A80036" points="2348,619.7969,2328,627.7969,2348,635.7969,2340,627.7969" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2336" x2="3135" y1="627.7969" y2="627.7969"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="346" x="2360" y="552.6777">seProxyService.registerPlugin</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="386" x="2368" y="585.3809">(RemoteSeServerPluginFactory...</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="326" x="2392" y="618.084">.withPluginObserver (this)...)</text><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="356" x="1970" y="558.5781"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="328" x="1984" y="601.6445">RemoteSeServerPlugin</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="3157" x2="3251" y1="711.2031" y2="711.2031"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3251" x2="3251" y1="711.2031" y2="737.2031"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3169" x2="3251" y1="737.2031" y2="737.2031"/><polygon fill="#A80036" points="3189,729.2031,3169,737.2031,3189,745.2031,3181,737.2031" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="212" x="3181" y="668.7871">Awaiting receipt of</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="190" x="3189" y="701.4902">a Plugin Event...</text><rect fill="#EEEEEE" height="6" style="stroke: #EEEEEE; stroke-width: 2.0;" width="3485" x="6" y="805.5547"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="805.5547" y2="805.5547"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="811.5547" y2="811.5547"/><rect fill="#EEEEEE" height="48.7031" style="stroke: #000000; stroke-width: 4.0;" width="324" x="1586.5" y="783.2031"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="288" x="1598.5" y="818.1934">Native SE Initialization</text><polygon fill="#A80036" points="1582,888.6094,1602,896.6094,1582,904.6094,1590,896.6094" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1194" x2="1594" y1="896.6094" y2="896.6094"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="364" x="1208" y="886.8965">NativeSeClientServiceFactory...</text><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="344" x="1606" y="851.9063"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316" x="1620" y="894.9727">NativeSeClientService</text><polygon fill="#A80036" points="802,1006.5313,782,1014.5313,802,1022.5313,794,1014.5313" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="790" x2="1172" y1="1014.5313" y2="1014.5313"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="346" x="814" y="972.1152">seProxyService.registerPlugin</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="216" x="822" y="1004.8184">(new XXXFactory())</text><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="218" x="562" y="945.3125"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="576" y="988.3789">ReaderPlugin</text><polygon fill="#A80036" points="563,1067.2344,543,1075.2344,563,1083.2344,555,1075.2344" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="551" x2="659" y1="1075.2344" y2="1075.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="72" x="575" y="1065.5215">create</text><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="294" x="247" y="1030.5313"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="266" x="261" y="1073.5977">ObservableReader</text><polygon fill="#A80036" points="1150,1119.75,1170,1127.75,1150,1135.75,1158,1127.75" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="671" x2="1162" y1="1127.75" y2="1127.75"/><rect fill="#EEEEEE" height="6" style="stroke: #EEEEEE; stroke-width: 2.0;" width="3485" x="6" y="1186.1016"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="1186.1016" y2="1186.1016"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="1192.1016" y2="1192.1016"/><rect fill="#EEEEEE" height="48.7031" style="stroke: #000000; stroke-width: 4.0;" width="320" x="1588.5" y="1163.75"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="284" x="1600.5" y="1198.7402">Native SE SeSelection</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1194" x2="1278" y1="1277.1563" y2="1277.1563"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1278" x2="1278" y1="1277.1563" y2="1303.1563"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1196" x2="1278" y1="1303.1563" y2="1303.1563"/><polygon fill="#A80036" points="1216,1295.1563,1196,1303.1563,1216,1311.1563,1208,1303.1563" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="260" x="1208" y="1267.4434">Start Ticketing Service</text><polygon fill="#A80036" points="703,1355.8594,683,1363.8594,703,1371.8594,695,1363.8594" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="691" x2="1172" y1="1363.8594" y2="1363.8594"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="206" x="715" y="1354.1465">getReader (name)</text><polygon fill="#A80036" points="1150,1416.5625,1170,1424.5625,1150,1432.5625,1158,1424.5625" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="671" x2="1162" y1="1424.5625" y2="1424.5625"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="72" x="685" y="1414.8496">reader</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1194" x2="1278" y1="1485.2656" y2="1485.2656"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1278" x2="1278" y1="1485.2656" y2="1511.2656"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1196" x2="1278" y1="1511.2656" y2="1511.2656"/><polygon fill="#A80036" points="1216,1503.2656,1196,1511.2656,1216,1519.2656,1208,1511.2656" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="322" x="1208" y="1475.5527">prepareSeSelection (reader)</text><polygon fill="#A80036" points="426,1563.9688,406,1571.9688,426,1579.9688,418,1571.9688" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="414" x2="1172" y1="1571.9688" y2="1571.9688"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="272" x="438" y="1562.2559">setSeSelectionRequest</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="380" x2="360" y1="1632.6719" y2="1624.6719"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="380" x2="360" y1="1632.6719" y2="1640.6719"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="88" x2="382" y1="1632.6719" y2="1632.6719"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="248" x="102" y="1622.959">SE_MATCHED Event</text><polygon fill="#A80036" points="110,1685.375,90,1693.375,110,1701.375,102,1693.375" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="98" x2="382" y1="1693.375" y2="1693.375"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="98" x="122" y="1683.6621">C-APDU</text><polygon fill="#A80036" points="360,1746.0781,380,1754.0781,360,1762.0781,368,1754.0781" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="88" x2="372" y1="1754.0781" y2="1754.0781"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="98" x="102" y="1744.3652">R-APDU</text><polygon fill="#A80036" points="1150,1806.7813,1170,1814.7813,1150,1822.7813,1158,1814.7813" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="394" x2="1162" y1="1814.7813" y2="1814.7813"/><text fill="#FF0000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="408" y="1805.0684">matchingSe</text><rect fill="#EEEEEE" height="6" style="stroke: #EEEEEE; stroke-width: 2.0;" width="3485" x="6" y="1873.1328"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="1873.1328" y2="1873.1328"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="1879.1328" y2="1879.1328"/><rect fill="#EEEEEE" height="48.7031" style="stroke: #000000; stroke-width: 4.0;" width="858" x="1319.5" y="1850.7813"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="822" x="1331.5" y="1885.7715">Execute Remote Service for a specific Observable Native Reader</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1194" x2="1278" y1="1964.1875" y2="1964.1875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1278" x2="1278" y1="1964.1875" y2="1990.1875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1196" x2="1278" y1="1990.1875" y2="1990.1875"/><polygon fill="#A80036" points="1216,1982.1875,1196,1990.1875,1216,1998.1875,1208,1990.1875" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="274" x="1208" y="1954.4746">prepareUserInputData ()</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1194" x2="1278" y1="2050.8906" y2="2050.8906"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1278" x2="1278" y1="2050.8906" y2="2076.8906"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1196" x2="1278" y1="2076.8906" y2="2076.8906"/><polygon fill="#A80036" points="1216,2068.8906,1196,2076.8906,1216,2084.8906,1208,2076.8906" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="372" x="1208" y="2041.1777">NativeSeClientUtils.getService ()</text><polygon fill="#A80036" points="1744,2293.1094,1764,2301.1094,1744,2309.1094,1752,2301.1094" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1194" x2="1756" y1="2301.1094" y2="2301.1094"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="282" x="1208" y="2127.8809">executeRemoteService (</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="308" x="1216" y="2160.584">RemoteServiceParameters</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="92" x="1232" y="2193.2871">.builder(</text><text fill="#0000FF" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="1324" y="2193.2871">serviceId</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="96" x="1438" y="2193.2871">, reader)</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="244" x="1232" y="2225.9902">.withInitialSeContent(</text><text fill="#FF0000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="1476" y="2225.9902">matchingSe</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="8" x="1628" y="2225.9902">)</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="226" x="1232" y="2258.6934">.withUserInputData(</text><text fill="#008000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="1458" y="2258.6934">userInputData</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="94" x="1634" y="2258.6934">).build(),</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="282" x="1216" y="2291.3965">UserOutputDataFactory)</text><polygon fill="#A80036" points="2114,2321.1094,2134,2329.1094,2114,2337.1094,2122,2329.1094" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1788" x2="2126" y1="2329.1094" y2="2329.1094"/><polygon fill="#A80036" points="2322,2381.8125,2342,2389.8125,2322,2397.8125,2330,2389.8125" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2158" x2="2334" y1="2389.8125" y2="2389.8125"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="72" x="2172" y="2380.0996">create</text><rect fill="#ADD8E6" height="63.2188" rx="10" ry="10" style="stroke: #A80036; stroke-width: 3.0;" width="534" x="2346" y="2345.1094"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="506" x="2360" y="2388.1758">RemoteSeServerObservableReader</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="3133" x2="3113" y1="2475.0313" y2="2467.0313"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3133" x2="3113" y1="2475.0313" y2="2483.0313"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2148" x2="3135" y1="2475.0313" y2="2475.0313"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="600" x="2162" y="2465.3184">notify (READER_CONNECTED, virtualReaderName)</text><polygon fill="#A80036" points="2180,2527.7344,2160,2535.7344,2180,2543.7344,2172,2535.7344" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2168" x2="3135" y1="2535.7344" y2="2535.7344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="358" x="2192" y="2526.0215">getReader (virtualReaderName)</text><polygon fill="#A80036" points="3113,2588.4375,3133,2596.4375,3113,2604.4375,3121,2596.4375" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="2148" x2="3125" y1="2596.4375" y2="2596.4375"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="148" x="2162" y="2586.7246">virtualReader</text><polygon fill="#A80036" points="2645,2649.1406,2625,2657.1406,2645,2665.1406,2637,2657.1406" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2633" x2="3135" y1="2657.1406" y2="2657.1406"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="164" x="2657" y="2647.4277">getServiceId ()</text><polygon fill="#A80036" points="3113,2709.8438,3133,2717.8438,3113,2725.8438,3121,2717.8438" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="2613" x2="3125" y1="2717.8438" y2="2717.8438"/><text fill="#0000FF" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="2627" y="2708.1309">serviceId</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="3157" x2="3241" y1="2811.25" y2="2811.25"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3241" x2="3241" y1="2811.25" y2="2837.25"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3159" x2="3241" y1="2837.25" y2="2837.25"/><polygon fill="#A80036" points="3179,2829.25,3159,2837.25,3179,2845.25,3171,2837.25" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="244" x="3171" y="2768.834">Find ticketing service</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="152" x="3171" y="2801.5371">to start using</text><text fill="#0000FF" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="3331" y="2801.5371">serviceId</text><rect fill="#EEEEEE" height="6" style="stroke: #EEEEEE; stroke-width: 2.0;" width="3485" x="6" y="2895.6016"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="2895.6016" y2="2895.6016"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3491" y1="2901.6016" y2="2901.6016"/><rect fill="#EEEEEE" height="48.7031" style="stroke: #000000; stroke-width: 4.0;" width="362" x="1567.5" y="2873.25"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="326" x="1579.5" y="2908.2402">Remote Ticketing Service</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="3157" x2="3241" y1="2986.6563" y2="2986.6563"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3241" x2="3241" y1="2986.6563" y2="3012.6563"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3159" x2="3241" y1="3012.6563" y2="3012.6563"/><polygon fill="#A80036" points="3179,3004.6563,3159,3012.6563,3179,3020.6563,3171,3012.6563" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="260" x="3171" y="2976.9434">Start Ticketing Service</text><polygon fill="#A80036" points="2645,3065.3594,2625,3073.3594,2645,3081.3594,2637,3073.3594" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2633" x2="3135" y1="3073.3594" y2="3073.3594"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="242" x="2657" y="3063.6465">getInitialSeContent ()</text><polygon fill="#A80036" points="3113,3126.0625,3133,3134.0625,3113,3142.0625,3121,3134.0625" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="2613" x2="3125" y1="3134.0625" y2="3134.0625"/><text fill="#FF0000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="2627" y="3124.3496">matchingSe</text><polygon fill="#A80036" points="2645,3219.4688,2625,3227.4688,2645,3235.4688,2637,3227.4688" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2633" x2="3135" y1="3227.4688" y2="3227.4688"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="200" x="2657" y="3185.0527">getUserInputData</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="268" x="2665" y="3217.7559">(UserInputDataFactory)</text><polygon fill="#A80036" points="3113,3280.1719,3133,3288.1719,3113,3296.1719,3121,3288.1719" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="2613" x2="3125" y1="3288.1719" y2="3288.1719"/><text fill="#008000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="2627" y="3278.459">userInputData</text><polygon fill="#A80036" points="2645,3340.875,2625,3348.875,2645,3356.875,2637,3348.875" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2633" x2="3135" y1="3348.875" y2="3348.875"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="210" x="2657" y="3339.1621">addObserver (this)</text><polygon fill="#A80036" points="3113,3368.875,3133,3376.875,3113,3384.875,3121,3376.875" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="2613" x2="3125" y1="3376.875" y2="3376.875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3157" x2="3241" y1="3437.5781" y2="3437.5781"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3241" x2="3241" y1="3437.5781" y2="3463.5781"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3159" x2="3241" y1="3463.5781" y2="3463.5781"/><polygon fill="#A80036" points="3179,3455.5781,3159,3463.5781,3179,3471.5781,3171,3463.5781" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="122" x="3171" y="3427.8652">continue...</text><path d="M36,3493.5781 L172,3493.5781 L172,3509.5781 L152,3529.5781 L26,3529.5781 L26,3503.5781 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="none" height="398.9219" rx="10" ry="10" style="stroke: #000000; stroke-width: 4.0;" width="3388" x="26" y="3493.5781"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="56" y="3522.5684">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="202" y="3520.416">[SE exchanges]</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="3157" x2="3241" y1="3607.6875" y2="3607.6875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3241" x2="3241" y1="3607.6875" y2="3633.6875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3159" x2="3241" y1="3633.6875" y2="3633.6875"/><polygon fill="#A80036" points="3179,3625.6875,3159,3633.6875,3179,3641.6875,3171,3633.6875" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="214" x="3171" y="3565.2715">prepareSeRequest</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="164" x="3179" y="3597.9746">(virtualReader)</text><polygon fill="#A80036" points="2645,3686.3906,2625,3694.3906,2645,3702.3906,2637,3694.3906" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2633" x2="3135" y1="3694.3906" y2="3694.3906"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="244" x="2657" y="3684.6777">processSeRequest ()</text><polygon fill="#A80036" points="110,3747.0938,90,3755.0938,110,3763.0938,102,3755.0938" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="98" x2="2601" y1="3755.0938" y2="3755.0938"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="98" x="122" y="3745.3809">C-APDU</text><polygon fill="#A80036" points="2579,3807.7969,2599,3815.7969,2579,3823.7969,2587,3815.7969" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="88" x2="2591" y1="3815.7969" y2="3815.7969"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="98" x="102" y="3806.084">R-APDU</text><polygon fill="#A80036" points="3113,3868.5,3133,3876.5,3113,3884.5,3121,3876.5" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="2613" x2="3125" y1="3876.5" y2="3876.5"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="106" x="2627" y="3866.7871">response</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="3157" x2="3241" y1="3951.2031" y2="3951.2031"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3241" x2="3241" y1="3951.2031" y2="3977.2031"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3159" x2="3241" y1="3977.2031" y2="3977.2031"/><polygon fill="#A80036" points="3179,3969.2031,3159,3977.2031,3179,3985.2031,3171,3977.2031" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="296" x="3171" y="3941.4902">prepareUserOutputData ()</text><polygon fill="#A80036" points="2180,4029.9063,2160,4037.9063,2180,4045.9063,2172,4037.9063" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2168" x2="3135" y1="4037.9063" y2="4037.9063"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="432" x="2192" y="4028.1934">terminateService (virtualReaderName,</text><text fill="#800080" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="2632" y="4028.1934">userOutputData</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="8" x="2828" y="4028.1934">)</text><line style="stroke: #A80036; stroke-width: 4.0;" x1="2577" x2="2597" y1="4088.6094" y2="4108.6094"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="2577" x2="2597" y1="4108.6094" y2="4088.6094"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2158" x2="2587" y1="4098.6094" y2="4098.6094"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="236" x="2172" y="4088.8965">remove virtual reader</text><polygon fill="#A80036" points="1810,4118.6094,1790,4126.6094,1810,4134.6094,1802,4126.6094" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1798" x2="2146" y1="4126.6094" y2="4126.6094"/><polygon fill="#A80036" points="1216,4179.3125,1196,4187.3125,1216,4195.3125,1208,4187.3125" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1204" x2="1776" y1="4187.3125" y2="4187.3125"/><text fill="#800080" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="1228" y="4177.5996">userOutputData</text><!--MD5=[0f3f6e2cbb8e1a6f41c01b7daa91f227]
@startuml
title
    Keyple Plugin Remote SE
    RemoteSeServerPlugin API (16/06/2020)
    (with an ObservableReader)
end title


skinparam Shadowing false
skinparam RoundCorner 10



participant "SE" as se

box "Native SE" #FEF9E7
participant "**ObservableReader**" as reader #LightBlue
participant "**ReaderPlugin**" as plugin #LightBlue
actor "**Native SE App**" as client
participant "**NativeSeClientService**" as nativeSeService #LightBlue
end box

box "Virtual SE" #FDF2E9
participant "**RemoteSeServerPlugin**" as remoteSePlugin #LightBlue
participant "**RemoteSeServerObservableReader**" as virtualReader #LightBlue
actor "**Virtual SE App**:\n**<back:LightBlue>ObservablePlugin.PluginObserver**" as server
end box

== Virtual SE Initialization ==

activate server #Pink
server -> remoteSePlugin ** : seProxyService.registerPlugin\n (RemoteSeServerPluginFactory...\n    .withPluginObserver (this)...)
server -> server : Awaiting receipt of\n a Plugin Event...

== Native SE Initialization ==

activate client #Pink
client -> nativeSeService ** : NativeSeClientServiceFactory...
client -> plugin ** : seProxyService.registerPlugin\n (new XXXFactory())
activate plugin #LightBlue
plugin -> reader ** : create
return

== Native SE SeSelection ==

client -> client : Start Ticketing Service
client -> plugin : getReader (name)
activate plugin #LightBlue
return reader
client -> client : prepareSeSelection (reader)
client -> reader : setSeSelectionRequest
activate reader #LightBlue

activate se #LightYellow
se ->> reader : SE_MATCHED Event
reader -> se : C-APDU
se - -> reader : R-APDU
return <color:red>**matchingSe**</color>

== Execute Remote Service for a specific Observable Native Reader ==

client -> client : prepareUserInputData ()

client -> client : NativeSeClientUtils.getService ()
client -> nativeSeService : executeRemoteService (\n RemoteServiceParameters\n   .builder(<color:blue>**serviceId**</color>, reader)\n   .withInitialSeContent(<color:red>**matchingSe**</color>)\n   .withUserInputData(<color:green>**userInputData**</color>).build(),\n UserOutputDataFactory)
activate nativeSeService #LightBlue

nativeSeService -> remoteSePlugin
activate remoteSePlugin #LightBlue
remoteSePlugin -> virtualReader ** : create
remoteSePlugin ->> server : notify (READER_CONNECTED, virtualReaderName)
deactivate remoteSePlugin

server -> remoteSePlugin : getReader (virtualReaderName)
activate remoteSePlugin #LightBlue
return virtualReader
server -> virtualReader : getServiceId ()
activate virtualReader #LightBlue
return <color:blue>**serviceId**</color>
server -> server : Find ticketing service\nto start using <color:blue>**serviceId**</color>

== Remote Ticketing Service ==

server -> server : Start Ticketing Service
server -> virtualReader : getInitialSeContent ()
activate virtualReader #LightBlue
return <color:red>**matchingSe**</color>
server -> virtualReader : getUserInputData\n (UserInputDataFactory)
activate virtualReader #LightBlue
return <color:green>**userInputData**</color>
server -> virtualReader : addObserver (this)
activate virtualReader #LightBlue
return
server -> server : continue...

loop #FDF2E9 SE exchanges
    server -> server : prepareSeRequest\n (virtualReader)
    server -> virtualReader : processSeRequest ()
    activate virtualReader #LightBlue
    virtualReader -> se : C-APDU
    se - -> virtualReader : R-APDU
    return response
end loop

server -> server : prepareUserOutputData ()
server -> remoteSePlugin : terminateService (virtualReaderName, <color:purple>**userOutputData**</color>)
activate remoteSePlugin #LightBlue
remoteSePlugin -x virtualReader : remove virtual reader

remoteSePlugin - -> nativeSeService
deactivate remoteSePlugin
nativeSeService - -> client : <color:purple>**userOutputData**</color>
deactivate nativeSeService

@enduml

PlantUML version 1.2020.09(Sun May 10 12:51:06 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-b765.53
Operating System: Windows 10
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>